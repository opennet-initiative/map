<IfModule mod_macro.c>
<Macro OnMap>
	DocumentRoot /usr/share/on-map/

	<Directory /usr/share/on-map/>
		Require all granted

		#rewrite for tiles
		# e.g. before http://www.youdomain.tld/tiles.php?z=15&x=17024&y=10792&r=mapnik
		#      after  http://www.youdomain.tld/tiles/15/17024/10792.png
		RewriteEngine on
		RewriteRule ^tiles/([0-9]+)/([0-9]+)/([0-9]+).png$ tiles.php?z=$1&x=$2&y=$3 [L]
	</Directory>

	# allow the JS client to access the API without caring about CSRF
  SSLProxyEngine on
	<LocationMatch "/api">
	   ProxyPass https://api.opennet-initiative.de/api
	   Header add "Access-Control-Allow-Origin" "*"
	</LocationMatch>


</Macro>
</IfModule>
